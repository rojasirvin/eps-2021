---
title: "Respuestas a la tarea 1"
summary: " "
weight: 2
type: book
toc: false
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="pregunta-1" class="section level2">
<h2>Pregunta 1</h2>
<p>Suponga que para un experimento en un laboratorio se asignó a un grupo pacientes a un brazo de tratamiento o a uno de control. Antes de comenzar el experimento se recolectaron una serie de características <span class="math inline">\(x_{ji}\)</span>, <span class="math inline">\(j=1,\ldots 10\)</span>, de cada paciente. Se busca medir el efecto del tratamiento sobre una variable de resultados <span class="math inline">\(y_i\)</span>. En el experimento, se trabaja con <span class="math inline">\(\alpha=0.10\)</span>.</p>
<ol style="list-style-type: lower-alpha">
<li><p>[5 puntos] El investigador A quedó a cargo de comprobar el balance de la asignación del tratamiento y le reporta lo siguiente:</p>
<p><em>Para verificar que la aleatorización fue exitosa, tomé la serie de variables pre-intervención y la dummy de asignación al tratamiento <span class="math inline">\(T_i\)</span> para correr la siguiente regresión:</em>
<span class="math display">\[T_i=\alpha+\sum_{j=1}^{10}x_{ji}&#39;\beta +\varepsilon_i\]</span></p>
<p><em>Después realicé una prueba <span class="math inline">\(F\)</span> de significancia conjunta sobre los coeficientes <span class="math inline">\(\beta_j\)</span> que resultó tener un valor <span class="math inline">\(p\)</span> de 0.52.</em></p>
<p>Explique cuál es la hipótesis nula en la prueba realizada y qué se esperaría de haberse logrado una aleatorización exitosa del tratamiento.</p>
<p><em>Si la integridad del diseño se mantuvo durante el experimento, se esperaría que las características observables no predijeran el estado de tratamiento. En otras palabras, esperaríamos que los coeficientes en su conjunto no fueran significativos. Es decir, <span class="math inline">\(H_0: \beta_1=\beta_2=\ldots=\beta_k=0\)</span>. La hipótesis nula se rechaza si la probabilidad de observar el estadístico <span class="math inline">\(F\)</span> es mayor que el valor de <span class="math inline">\(\alpha\)</span> elegido para el estudio.</em></p></li>
<li><p>[5 puntos] ¿Qué concluye a partir de lo que le reporta el investigador A?</p>
<p><em>Un valor <span class="math inline">\(p\)</span> grande indica que es altamente probable observar el estadístico <span class="math inline">\(F\)</span> bajo la <span class="math inline">\(H_0\)</span>. Por tanto, no rechazamos la <span class="math inline">\(H_0\)</span> y concluimos que no existe evidencia de que las características observables sean predictores del estado de tratamiento. En otras palabras, no hay evidencia de que el experimento esté comprometido.</em></p></li>
<li><p>[5 puntos] Por otro lado, el investigador B le reporta lo siguiente:</p>
<p><em>Yo realicé un análisis para determinar el balance en la asignación del tratamiento. Para cada una de las características <span class="math inline">\(x_{ji}\)</span> corrí la siguiente regresión:</em>
<span class="math display">\[x_{ji}=\gamma+\pi T_i+u_i\]</span>
<em>A continuación, le reporto una tabla con los valores p asociados al coeficiente estimado de <span class="math inline">\(\pi\)</span> en cada una de las 10 regresiones.</em></p>
<table>
<thead>
<tr class="header">
<th><strong>Característica</strong></th>
<th><strong>Valor <span class="math inline">\(p\)</span></strong></th>
<th></th>
<th><strong>Característica</strong></th>
<th><strong>Valor <span class="math inline">\(p\)</span></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(x_{1i}\)</span></td>
<td>0.25</td>
<td></td>
<td><span class="math inline">\(x_{6i}\)</span></td>
<td>0.15</td>
</tr>
<tr class="even">
<td><span class="math inline">\(x_{2i}\)</span></td>
<td>0.12</td>
<td></td>
<td><span class="math inline">\(x_{7i}\)</span></td>
<td>0.33</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(x_{3i}\)</span></td>
<td>0.27</td>
<td></td>
<td><span class="math inline">\(x_{8i}\)</span></td>
<td>0.19</td>
</tr>
<tr class="even">
<td><span class="math inline">\(x_{4i}\)</span></td>
<td>0.76</td>
<td></td>
<td><span class="math inline">\(x_{9i}\)</span></td>
<td>0.28</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(x_{5i}\)</span></td>
<td>0.02</td>
<td></td>
<td><span class="math inline">\(x_{10i}\)</span></td>
<td>0.17</td>
</tr>
</tbody>
</table>
<p>Explique la hipótesis nula detrás de las pruebas que realizó el investigador B y qué se esperaría de haberse logrado una aleatorización exitosa del tratamiento,</p>
<p><em>Otra forma de proveer evidencia de la integridad del tratamiento es analizando el balance de las características observadas entre grupos de tratamiento. En este caso, si las medias de cada <span class="math inline">\(x_{ij}\)</span> entre los grupos de tratados y de control son iguales, esperaríamos que el coeficiente <span class="math inline">\(\pi\)</span> fuera no significativo. Con el nivel de significancia de <span class="math inline">\(\alpha=0.10\)</span>, rechazamos la <span class="math inline">\(H_0\)</span> solo una vez, por lo que no hay evidencia de que la asignación no fue aleatoria.</em></p></li>
<li><p>[5 puntos] ¿Cómo reconcilia la evidencia encontrada por el investigador A y el B y qué concluye sobre el balance en la asignación del tratamiento? ¿Qué características tendría una diferencia de medias de <span class="math inline">\(y_i\)</span> después del tratamiento como estimador del impacto de este?</p>
<p><em>La evidencia reportada por los investigadores A y B es totalmente consistente entre sí. El investigador A concluye que el tratamiento no se puede predecir usando las características observables. Por su parte, el investigador B muestra que las características observables son estadísticamente iguales entre los grupos de tratamiento y de control. Por tanto, hay evidencia de que la asignación del tratamiento efectivamente fue aleatoria. Bajo este supuesto, una diferencia de medias de <span class="math inline">\(y_i\)</span> entre tratados y controles resulta en un estimador insesgado y consistente del efecto de tratamiento.</em></p></li>
</ol>
</div>
<div id="pregunta-2" class="section level2">
<h2>Pregunta 2</h2>
<p>Suponga que desea evaluar el impacto de una vacuna contra el covid-19. Asuma que dispone de ilimitados recursos financieros y humanos. Considere por ahora a todos los tipos de vacunas como un mismo tratamiento. Se desea estudiar la efectividad de las vacunas para reducir la probabilidad de ser hospitaliazado por covid-19.</p>
<ol style="list-style-type: lower-alpha">
<li><p>[10 puntos] Describa cómo diseñaría su experimento ideal para determinar la efectividad de la vacuna para reducir la probabilidad de hospitalización.</p>
<p><em>Una posible propuesta de experimento ideal consistiría en seleccionar aleatoriamente localidades de tratamiento y control. Antes del inicio de la vacunación, se recolectaría información sociodemográfica de una muestra de individuos y de las características de las localidades en los grupos tratados y de control para determinar si efectivamente ambos tipos de localidades tienen características similares.</em></p>
<p><em>Varias semanas después del inicio del programa de vacunación, se deberá recolectar información para construir la tasa de hospitalización por localidad. Bajo los supuestos de asignación aleatoria y SUTVA, se pueden comparar las tasas de hospitalización entre localidades de tratamiento y control para determinar si efectivamente las localidades tratadas tiene una tasa de hospitalización menor que sus contrapartes de control.</em></p></li>
<li><p>[5 puntos] Escriba la regresión que usaría para estimar los efectos de las medidas implementadas en una variable de mortalidad.</p>
<p><em>Si el diseño permitió generar grupos estadísticamente idénticos de localidades tratadas y y de control, podemos evaluar el impacto de la intervención estimando:</em>
<span class="math display">\[y_i=\alpha+\beta T_i+X_i&#39;\Gamma+\varepsilon_i\]</span>
<em>donde <span class="math inline">\(y_i\)</span> es la tasa de hospitalización por localidad, <span class="math inline">\(T_i\)</span> es un indicador del estado de tratamiento y <span class="math inline">\(X_i\)</span> es un vector de características observables de las localidades.</em></p></li>
<li><p>[5 puntos] ¿Cuáles considera que serían las distintas dificultades prácticas, institucionales y éticas en la implementación de su experimento ideal?</p>
<p><em>La evaluación propuesta permitiría identificar el efecto a nivel localidad de una política que tiene impactos sobre la salud de las personas. Esto supondría un debate ético si asumimos que la vacunación solo puede mejorar la salud de las personas (y, el peor de los casos, no hacer nada). ¿Cómo se puede justificar de forma ética el realizar la intervención antes descrita sobre un subgrupo de la población?</em></p>
<p><em>Un problema adicional en la implementación es la posibilidad de que las personas de las localidades de control reciban la vacuna. A menos de que hubiera restricciones físicas para evitar que esto sucediera, es posible que el experimento se vea comprometido y que el efecto estimado esté sesgado.</em></p>
<p><em>Noten que en esta pregunta no hay una sola respuesta correcta.</em></p></li>
</ol>
</div>
<div id="pregunta-3" class="section level2">
<h2>Pregunta 3</h2>
<p>Replique el ejercicio de representar la FEC de salarios en función de educación para México, como en la Figura 3.1.1 de MHE (p. 39), usando los datos del primer trimestre de 2021 de la ENOE. El gráfico es complejo, pero recibirá crédito completo si reproduce, al menos por separado, los dos siguientes tipos de gráficos:</p>
<ol style="list-style-type: lower-alpha">
<li><p>[10 puntos] Gráfico de la relación promedio entre años de educación e ingresos.</p>
<pre class="r"><code>#Del laboratorio 1 tomo la base data_empleo1. Si hago un colnames(data_socdem) puedo ver las variables que inclue la base.


data_socdem&lt;-read_csv(
  &quot;./ENOEN_SDEMT121.csv&quot;,
  locale=locale(encoding=&quot;latin1&quot;)) %&gt;% 
  clean_names()

colnames(data_socdem)
##   [1] &quot;r_def&quot;      &quot;loc&quot;        &quot;mun&quot;        &quot;est&quot;        &quot;est_d_tri&quot; 
##   [6] &quot;est_d_men&quot;  &quot;ageb&quot;       &quot;t_loc_tri&quot;  &quot;t_loc_men&quot;  &quot;cd_a&quot;      
##  [11] &quot;ent&quot;        &quot;con&quot;        &quot;upm&quot;        &quot;d_sem&quot;      &quot;n_pro_viv&quot; 
##  [16] &quot;v_sel&quot;      &quot;n_hog&quot;      &quot;h_mud&quot;      &quot;n_ent&quot;      &quot;per&quot;       
##  [21] &quot;n_ren&quot;      &quot;c_res&quot;      &quot;par_c&quot;      &quot;sex&quot;        &quot;eda&quot;       
##  [26] &quot;nac_dia&quot;    &quot;nac_mes&quot;    &quot;nac_anio&quot;   &quot;l_nac_c&quot;    &quot;cs_p12&quot;    
##  [31] &quot;cs_p13_1&quot;   &quot;cs_p13_2&quot;   &quot;cs_p14_c&quot;   &quot;cs_p15&quot;     &quot;cs_p16&quot;    
##  [36] &quot;cs_p17&quot;     &quot;n_hij&quot;      &quot;e_con&quot;      &quot;cs_ad_mot&quot;  &quot;cs_p20_des&quot;
##  [41] &quot;cs_ad_des&quot;  &quot;cs_nr_mot&quot;  &quot;cs_p22_des&quot; &quot;cs_nr_ori&quot;  &quot;ur&quot;        
##  [46] &quot;zona&quot;       &quot;salario&quot;    &quot;fac_tri&quot;    &quot;fac_men&quot;    &quot;clase1&quot;    
##  [51] &quot;clase2&quot;     &quot;clase3&quot;     &quot;pos_ocu&quot;    &quot;seg_soc&quot;    &quot;rama&quot;      
##  [56] &quot;c_ocu11c&quot;   &quot;ing7c&quot;      &quot;dur9c&quot;      &quot;emple7c&quot;    &quot;medica5c&quot;  
##  [61] &quot;buscar5c&quot;   &quot;rama_est1&quot;  &quot;rama_est2&quot;  &quot;dur_est&quot;    &quot;ambito1&quot;   
##  [66] &quot;ambito2&quot;    &quot;tue1&quot;       &quot;tue2&quot;       &quot;tue3&quot;       &quot;busqueda&quot;  
##  [71] &quot;d_ant_lab&quot;  &quot;d_cexp_est&quot; &quot;dur_des&quot;    &quot;sub_o&quot;      &quot;s_clasifi&quot; 
##  [76] &quot;remune2c&quot;   &quot;pre_asa&quot;    &quot;tip_con&quot;    &quot;dispo&quot;      &quot;nodispo&quot;   
##  [81] &quot;c_inac5c&quot;   &quot;pnea_est&quot;   &quot;niv_ins&quot;    &quot;eda5c&quot;      &quot;eda7c&quot;     
##  [86] &quot;eda12c&quot;     &quot;eda19c&quot;     &quot;hij5c&quot;      &quot;domestico&quot;  &quot;anios_esc&quot; 
##  [91] &quot;hrsocup&quot;    &quot;ingocup&quot;    &quot;ing_x_hrs&quot;  &quot;tpg_p8a&quot;    &quot;tcco&quot;      
##  [96] &quot;cp_anoc&quot;    &quot;imssissste&quot; &quot;ma48me1sm&quot;  &quot;p14apoyos&quot;  &quot;scian&quot;     
## [101] &quot;t_tra&quot;      &quot;emp_ppal&quot;   &quot;tue_ppal&quot;   &quot;trans_ppal&quot; &quot;mh_fil2&quot;   
## [106] &quot;mh_col&quot;     &quot;sec_ins&quot;    &quot;tipo&quot;       &quot;mes_cal&quot;    &quot;ca&quot;

#Un vistazo a los archivos de las bases me permite identificar que anios_esc es la variable de años de educación e ingocup me da el ingreso laboral mensual

#Elijo quedarme con personas de más de 15 años y que se consideren parte de la PEA y calculo el log de los ingresos semanales
data_fec &lt;- data_socdem %&gt;%
  filter(anios_esc&lt;=20) %&gt;% 
  filter(clase1==1) %&gt;% 
  mutate(ing.mensual=ingocup/4.3) %&gt;% 
  mutate(lingreso=ifelse(ing.mensual&gt;0,log(ing.mensual),NA))

#FEC:
library(srvyr) #Para trabajar con los pesos

g1 &lt;- data_fec %&gt;%
  as_survey(weights = c(fac_tri)) %&gt;%
  group_by(anios_esc) %&gt;%
  summarize(lingreso=survey_mean(lingreso, na.rm = TRUE)) %&gt;%
  ggplot(aes(anios_esc, lingreso)) +
  geom_line() +
  labs(title =&quot;Función de esperanza condicional&quot;,
   caption=&quot;Fuente: datos de la ENOE, T12021&quot;)+
  ylab(&quot;Log del ingreso semanal (MXN)&quot;)+
  xlab(&quot;Años de educación&quot;)+
  scale_x_continuous(breaks = c(0,2,4,6,8,10,12,14,16,18,20))

g1</code></pre>
<p><img src="/tareas/tarea_1/tarea1_respuestas_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p></li>
<li><p>[10 puntos] Gráfico de la distribución de ingresos para cuatro niveles de educación que usted considere relevante destacar. Argumente sobre los niveles de educación elegidos.</p>
<pre class="r"><code>#Densidad por grupos
#Con algo más de talacha podríamos superponerla
#sobre la FEC

g2 &lt;- data_fec %&gt;%
  filter(anios_esc==c(6,12,15,18)) %&gt;% 
  ggplot(aes(y=lingreso))+
  geom_density(aes(weight=fac_tri), bw = 0.09)+
  facet_wrap(anios_esc~.,nrow=1) +
  labs(title =&quot;Función de densidad de salarios&quot;,
   subtitle =&quot;Cuatro años de educación seleccionados&quot;,
     caption=&quot;Fuente: datos de la ENOE, T12021&quot;)+
  ylim(6, 10) +
  ylab(&quot;Log del ingreso semanal (MXN)&quot;)+
  xlab(&quot;Densidad&quot;)+
  theme(axis.text.x = element_text(angle = 90, hjust = 1, size=8))

g2</code></pre>
<p><img src="/tareas/tarea_1/tarea1_respuestas_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p></li>
</ol>
</div>
<div id="pregunta-4" class="section level2">
<h2>Pregunta 4</h2>
<p>Use los datos del archivo <em>STAR_public_use.csv</em> para este problema. En este problema replicará la fila correspondiente a la variable <strong>age</strong> de la Tabla 1 en <a href="https://pubs.aeaweb.org/doi/pdfplus/10.1257/app.1.1.136">Angrist et al. (2009)</a>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<ol style="list-style-type: lower-alpha">
<li><p>[5 puntos] Obtenga la media y la desviación estándar de la edad, <strong>age</strong>, en el grupo de control (columna 1), restringiendo la muestra a aquellos individuos con <strong>noshow</strong> igual a 0.</p>
<pre class="r"><code>data.angrist&lt;-read_csv(&quot;./STAR_public_use.csv&quot;,
                   locale = locale(encoding = &quot;latin1&quot;))   %&gt;% 
  clean_names() %&gt;% 
  filter(noshow==0)

#Estadística descriptiva

data.angrist %&gt;% 
filter(control==1) %&gt;% 
  summarize(media=mean(age))
## # A tibble: 1 x 1
##   media
##   &lt;dbl&gt;
## 1  18.3

data.angrist %&gt;% 
  filter(control==1) %&gt;%
  summarize(desvest=sd(age)) 
## # A tibble: 1 x 1
##   desvest
##     &lt;dbl&gt;
## 1   0.616

data.angrist %&gt;% 
  summarize(numero=n())
## # A tibble: 1 x 1
##   numero
##    &lt;int&gt;
## 1   1571</code></pre></li>
<li><p>[10 puntos] Usando una regresión lineal, muestre que los distintos tratamientos son independientes de la edad. De nuevo, debe restringir la muestra quienes tienen <strong>noshow</strong> igual a 0. Reporte los coeficientes y los errores estándar (columnas 2 a 4).</p></li>
</ol>
<pre class="r"><code>#Balance de características
balance&lt;-lm(age~ ssp + sfp+ sfsp,
            data=data.angrist)

summary(balance)
## 
## Call:
## lm(formula = age ~ ssp + sfp + sfsp, data = data.angrist)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.2910 -0.2910 -0.2910 -0.2373  4.7090 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 18.29097    0.01985 921.363   &lt;2e-16 ***
## ssp         -0.05368    0.04454  -1.205    0.228    
## sfp         -0.03277    0.04395  -0.746    0.456    
## sfsp         0.02558    0.05562   0.460    0.646    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.6125 on 1567 degrees of freedom
## Multiple R-squared:  0.001438,   Adjusted R-squared:  -0.0004737 
## F-statistic: 0.7522 on 3 and 1567 DF,  p-value: 0.5211</code></pre>
<ol style="list-style-type: lower-alpha">
<li><p>[5 puntos] Realice una prueba de significancia conjunta de los coeficientes obtenidos en el punto b. Reporte el estadístico <span class="math inline">\(F\)</span> y el valor <span class="math inline">\(p\)</span> asociado (columna 5).</p>
<pre class="r"><code>#La prueba F ya está realizada con la regresión. Basta con pedirla
summary(balance)$fstatistic
##        value        numdf        dendf 
##    0.7522152    3.0000000 1567.0000000

#En la salida puedo ver el valor de F. ¿Pero cómo puedo calcularl p?
pvalue&lt;-pf(summary(balance)$fstatistic[1],
       summary(balance)$fstatistic[2],
       summary(balance)$fstatistic[3],
       lower.tail=FALSE)
pvalue
##     value 
## 0.5210527</code></pre></li>
</ol>
</div>
<div id="pregunta-5" class="section level2">
<h2>Pregunta 5</h2>
<p>Nuevamente, use los datos del archivo <em>STAR_public_use.csv</em> para este problema. En este problema, replicará dos columnas del efecto de tratamiento de la Tabla 5. Note que de nuevo se deben usar solo las observaciones que tienen <strong>noshow</strong> igual a 0. Además, note que se usan las siguientes variables de control: <strong>sex</strong>, <strong>mtongue</strong>, <strong>hsgroup</strong>, <strong>numcourses_nov1</strong>, <strong>lastmin</strong>, <strong>mom_edn</strong>, y <strong>dad_edn</strong>, todas ellas categóricas.</p>
<p>Antes de estimar los efectos, los autores sustituyen <strong>gpa_year1</strong> por NA cuando <strong>grade_20059_fall</strong> es NA y sustituyen <strong>grade_20059_fall</strong> por NA cuando <strong>gpa_year1</strong> es NA Esto le permitirá quedarse con los individuos que tienen información completa.</p>
<ol style="list-style-type: lower-alpha">
<li><p>[10 puntos] Estime el efecto de cada tipo de tratamiento sobre el <em>GPA</em>, es decir, sobre la variable <strong>gpa_year1</strong>, para toda la muestra (Panel B, columna 1). Calcule correctamente los errores estándar. Interprete los resultados.</p>
<pre class="r"><code>#Efecto de tratamiento

data.angrist &lt;- data.angrist %&gt;% 
  mutate(gpa_year1=ifelse(is.na(grade_20059_fall),NA,gpa_year1),
         grade_20059_fall=ifelse(is.na(gpa_year1),NA,grade_20059_fall))

reg1&lt;-lm(gpa_year1 ~ ssp + sfp+ sfsp+
       factor(sex)+
       factor(mtongue)+ factor(hsgroup)+factor(numcourses_nov1)+
       factor(lastmin)+
       factor(mom_edn)+
       factor(dad_edn),
     data=data.angrist)

#Noten que los coeficientes estimados son correctos
summary(reg1)$coef[1:4,]
##               Estimate Std. Error  t value     Pr(&gt;|t|)
## (Intercept) 1.60138378 0.46453145 3.447310 0.0005854449
## ssp         0.07259427 0.06603498 1.099331 0.2718404422
## sfp         0.01025889 0.06515735 0.157448 0.8749178181
## sfsp        0.20971238 0.08554012 2.451626 0.0143604306

#Los errores estándar correctos son los robustos:
coeftest(reg1, vcov = vcovHC(reg1, &quot;HC1&quot;))[1:4,]
##               Estimate Std. Error   t value     Pr(&gt;|t|)
## (Intercept) 1.60138378 0.46059228 3.4767925 0.0005252628
## ssp         0.07259427 0.06601070 1.0997349 0.2716642613
## sfp         0.01025889 0.06357889 0.1613569 0.8718389856
## sfsp        0.20971238 0.09221545 2.2741566 0.0231293441

#Finalmente, lo que se reporta en la tabla como la media del grupo de control no es la constante en la regresión, sino la simple media y desviación

data.angrist.reg &lt;- data.angrist %&gt;% 
  filter(!is.na(gpa_year1) &amp; !is.na(grade_20059_fall)
     &amp; !is.na(ssp)
     &amp; !is.na(sfp)
     &amp; !is.na(sfsp)
     &amp; !is.na(sex)
     &amp; !is.na(mtongue)
     &amp; !is.na(hsgroup)
     &amp; !is.na(numcourses_nov1)
     &amp; !is.na(lastmin)
     &amp; !is.na(mom_edn)
     &amp; !is.na(dad_edn))

data.angrist.reg %&gt;%
  filter(control==1) %&gt;%
  summarize(media=mean(gpa_year1,na.rm=TRUE))
## # A tibble: 1 x 1
##   media
##   &lt;dbl&gt;
## 1  1.80

data.angrist.reg %&gt;%
  filter(control==1) %&gt;%
  summarize(desvest=sd(gpa_year1,na.rm=TRUE))
## # A tibble: 1 x 1
##   desvest
##     &lt;dbl&gt;
## 1   0.902

data.angrist.reg %&gt;%
  summarize(numero=n())
## # A tibble: 1 x 1
##   numero
##    &lt;int&gt;
## 1   1255</code></pre>
<p><em>Los individuos en los grupos de tratamiento SSP o SFP no tienen diferencias significativas en términos de su puntaje, con respecto al grupo de control. En cambio, los individuos tratados con SFSP tienen en promedio 0.21 puntos más que los del grupo de control, y esta diferencia es estadísticamente significativa, con un nivel de confianza de 95%.</em></p></li>
<li><p>[10 puntos] Estime el efecto de recibir cada tipo de tratamiento, considerando los tratamientos SSP o SFP (de cualquier tipo) en las mujeres de la muestra (Panel B, columna 6). Esto es, considere el tratamiento SSP como un primer tipo de tratamiento y, ya sea SFP o SFSP, como un segundo tipo de tratamiento. Calcule correctamente los errores estándar. Interprete sus resultados.</p>
<pre class="r"><code>#Efecto de cualquier tratamiento solo en mujeres
data.angrist &lt;- data.angrist %&gt;%
  mutate(sspany = ifelse(sfp == 1 | sfsp == 1, 1, 
0))

reg2&lt;-lm(gpa_year1 ~ ssp + sspany+
       factor(mtongue)+
       factor(hsgroup)+
       factor(numcourses_nov1)+
       factor(lastmin)+
       factor(mom_edn)+
       factor(dad_edn),
     data=filter(data.angrist,female==1))

#Los coeficientes con los errores correctos son:
coeftest(reg2, vcov = vcovHC(reg2, &quot;HC1&quot;))[1:3,]
##              Estimate Std. Error  t value     Pr(&gt;|t|)
## (Intercept) 2.5333972 0.28335814 8.940619 3.428412e-18
## ssp         0.1162368 0.08199976 1.417526 1.567753e-01
## sspany      0.1468443 0.07291557 2.013895 4.440376e-02</code></pre>
<p><em>No existe un efecto significativo del tratamiento SSP en las mujeres de la muestra. En cambio, las mujeres tratadas con SFP o SFSP tienen 0.15 puntos más en su calificación del primer año que las mujeres del grupo de control. Esta diferencia es estadísticamente significativa a un nivel de significacia del 5%.</em></p></li>
</ol>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Angrist, J., Lang, D., y Oreopoulos, P. (2009). Incentives and services for college achievement: Evidence from a randomized trial. <em>American Economic Journal: Applied Economics</em>, 1(1), 136-63.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
